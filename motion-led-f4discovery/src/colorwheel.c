/*
 * colorwheel.c
 *
 *  Created on: 18.02.2016
 *      Author: Spritkopf
 */



#include "colorwheel.h"

// Lookup Table for RGB Values of a simple Colorwheel
// 3*360 B = 1080 B
const uint8_t Colorwheel_LUT_R[360]={255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,251,247,242,238,234,230,225,221,217,213,208,204,200,196,191,187,183,179,174,170,166,162,157,153,149,145,140,136,132,128,123,119,115,111,106,102,98,94,89,85,81,77,72,68,64,60,55,51,47,43,38,34,30,26,21,17,13,9,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,9,13,17,21,26,30,34,38,43,47,51,55,60,64,68,72,77,81,85,89,94,98,102,106,111,115,119,123,128,132,136,140,145,149,153,157,162,166,170,174,179,183,187,191,196,200,204,208,213,217,221,225,230,234,238,242,247,251,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255};
const uint8_t Colorwheel_LUT_G[360]={0,4,9,13,17,21,26,30,34,38,43,47,51,55,60,64,68,72,77,81,85,89,94,98,102,106,111,115,119,123,128,132,136,140,145,149,153,157,162,166,170,174,179,183,187,191,196,200,204,208,213,217,221,225,230,234,238,242,247,251,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,251,247,242,238,234,230,225,221,217,213,208,204,200,196,191,187,183,179,174,170,166,162,157,153,149,145,140,136,132,128,123,119,115,111,106,102,98,94,89,85,81,77,72,68,64,60,55,51,47,43,38,34,30,26,21,17,13,9,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
const uint8_t Colorwheel_LUT_B[360]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,9,13,17,21,26,30,34,38,43,47,51,55,60,64,68,72,77,81,85,89,94,98,102,106,111,115,119,123,128,132,136,140,145,149,153,157,162,166,170,174,179,183,187,191,196,200,204,208,213,217,221,225,230,234,238,242,247,251,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,251,247,242,238,234,230,225,221,217,213,208,204,200,196,191,187,183,179,174,170,166,162,157,153,149,145,140,136,132,128,123,119,115,111,106,102,98,94,89,85,81,77,72,68,64,60,55,51,47,43,38,34,30,26,21,17,13,9,4};

/*!
    \brief          Look up RGB values in LUT by given angle
    \param angle    the angle of the colorwheel
    \param *buf_x   pointer to target buffer for color x

*/
uint8_t Colorwheel_GetRGB(uint16_t angle, uint8_t *buf_r, uint8_t *buf_g, uint8_t *buf_b)
{
    uint8_t bReturn = 1;

    if(angle<360)
    {
        *buf_r = Colorwheel_LUT_R[angle];
        *buf_g = Colorwheel_LUT_G[angle];
        *buf_b = Colorwheel_LUT_B[angle];
    }
    else
    {
        bReturn = 0;
    }

    return bReturn;
}

/*!
    \brief              Set Brightness (relative)
    \param brightess    brightness from 0-255
    \param *buf_x       pointer to target buffer for color x

*/
void Colorwheel_SetBrightness(uint8_t brightness, uint8_t *buf_r, uint8_t *buf_g, uint8_t *buf_b)
{
    float relative_brightness = (float)brightness/255.0;

    *buf_r *= (uint8_t)relative_brightness;
    *buf_g *= (uint8_t)relative_brightness;
    *buf_b *= (uint8_t)relative_brightness;
}
